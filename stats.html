---
layout: page
title: Stats
---
<script id="rowTemplate" type="text/x-handlebars-template">
	{% raw %}
		<tr>
		<th>Games played</th>
		<td>{{gamesPlayed}}</td>
		</tr>
		<tr>
		<th class="race_terran">Terran bots</th>
		<td>{{terranBots}}</td>
		</tr>
		<tr>
		<th class="race_terran">Terran victories</th>
		<td>{{terranWins}}</td>
		</tr>
		<tr>
		<th class="race_protoss">Protoss bots</th>
		<td>{{protossBots}}</td>
		</tr>
		<tr>
		<th class="race_protoss">Protoss victories</th>
		<td>{{protossWins}}</td>
		</tr>
		<tr>
		<th class="race_zerg">Zerg bots</th>
		<td>{{zergBots}}</td>
		</tr>
		<tr>
		<th class="race_zerg">Zerg victories</th>
		<td>{{zergWins}}</td>
		</tr>
		<tr>
		<th class="race_random">Random bots</th>
		<td>{{randomBots}}</td>
		</tr>
		<tr>
		<th class="race_random">Random victories</th>
		<td>{{randomWins}}</td>
		</tr>
		<tr>
		<th>Crashes</th>
		<td>{{crashes}}</td>
		</tr>
		<tr>
		<th>Avg. playtime (realtime)</th>
		<td>{{time averageGameRealtime}} seconds</td>
		</tr>
		{% endraw %}
</script>
<script id="raceCrossTableTemplate" type="text/x-handlebars-template">
	{% raw %}
	{{#each this as |vsrow race|}}
	<tr>
	<th class="cap">{{race}}</th>
	<td>{{won}}</td>
	<td>{{lost}}</td>
	<td>{{vsrow.terran}}</td>
	<td>{{vsrow.protoss}}</td>
	<td>{{vsrow.zerg}}</td>
	<td>{{vsrow.random}}</td>
	</tr>
	{{/each}}
	{% endraw %}
</script>
<script>
	$(function() {
		let rowTemplateSource = $("#rowTemplate").html();
		let rowTemplate = Handlebars.compile(rowTemplateSource);
		let crossTableTemplateSource = $("#raceCrossTableTemplate").html();
		let crossTableTemplate = Handlebars.compile(crossTableTemplateSource);
		let numberFormat = new Intl.NumberFormat(undefined, { minimumFractionDigits: 2, maximumFractionDigis: 2}).format;
		Handlebars.registerHelper("time", function(v) { return numberFormat(v); });

		$.getJSON("http://basilicum.bytekeeper.org/stats/stats.json", function(data) {
			let rowsHtml = rowTemplate(data);
			$("#statsTable tbody").append(rowsHtml);
			let rct = {terran: {terran: 10, protoss: 11, zerg: 12, random: 20}, protoss: {terran: 10, protoss: 11, zerg: 12, random: 20},zerg: {terran: 10, protoss: 11, zerg: 12, random: 20}};
			let crossTableData = data.raceCrossTable;
			crossTableData = rct;
			for (let key in crossTableData) {
				crossTableData[key].lost = 0;
			}
			for (let key in crossTableData) {
				let row = crossTableData[key];
				row.won = row.terran + row.protoss + row.zerg + row.random;
				for (let e in row) {
					if (typeof crossTableData[e] !== "undefined") crossTableData[e].lost += row[e];
				}
			}
			let crossTable = crossTableTemplate(crossTableData);
			$("#crossTable tbody").append(crossTable);
		});
	});
</script>
<div class="row">
	<div class="col-2">
		<table id="statsTable">
			<thead>
				<tr>
					<th>Item</th>
					<th>Value</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
	</div>
	<div class="col-4">
		<table id="crossTable">
			<thead>
				<th>Race</th>
				<th>Won</th>
				<th>Lost</th>
				<th>Terran</th>
				<th>Protoss</th>
				<th>Zerg</th>
				<th>Random</th>
			</thead>
			<tbody>
			</tbody>
		</table>
	</div>
</div>
<small>Source: <a href="http://basilicum.bytekeeper.org/stats/stats.json">http://basilicum.bytekeeper.org/stats/stats.json</a></small>
