---
layout: page
title: Last 24h
---
<script id="tableTemplate" type="text/x-handlebars-template">
	{% raw %}
		{{#each this}}
		<tr>
		{{> bot botA}}
		{{> bot botB}}
		<td>{{map}}</td>
		<td>{{time}}</td>
		<td>{{#unless frameCount}}<i class="fas fa-poo-storm"></i> {{/unless}}{{#if realTimeout}}<i class="fas fa-fish"></i> {{/if}}{{#if frameTimeout}}<i class="fas fa-stopwatch"></i> {{/if}}{{gameTime}}</td>
		<td>{{#if validGame}}<a href="{{replayUrl}}"><i class="fas fa-download"></i></a>{{/if}}</td>
		<td>{{#if validGame}}<a href="http://www.openbw.com/replay-viewer/?rep={{replayUrl}}" target="_blank">OpenBW</a>{{/if}}</td>
		</tr>
		{{/each }}
		{% endraw %}
</script>
<script>
	$(function() {
		{% raw %}
		Handlebars.registerPartial("bot", 
			'<td class="{{racecol race}}">'
			+ '{{#if winner}}<i class="fas fa-trophy"></i>{{/if}}'
			+ '{{#if crashed}}<i class="fas fa-car-crash"></i>{{else}}'
			+ '{{#if loser}}<i class="fas fa-sad-tear"></i>{{/if}}'
			+ '{{/if}}'
			+ ' {{name}} <a class="float-right normal" href="ranking.html#{{name}}"><i class="fas fa-align-left"></i></a></td>');
		{% endraw %}
		let source = $("#tableTemplate").html();
		let template = Handlebars.compile(source);
		$.getJSON("http://basilicum.bytekeeper.org/stats/game_results.json", function(data) {
			for (i = 0; i < data.length; i++) {
				let botA = data[i].botA.name;
				let botB = data[i].botB.name;
				data[i].time = basil.formatDateTime(data[i].endedAt);
				data[i].replayUrl = "http://basilicum.bytekeeper.org/bots/" + botA + "/"+  botA + " vs " + botB + " " + data[i].map + " " + data[i].gameHash + ".rep"
				if (data[i].frameCount) {
					let secs = Math.round(data[i].frameCount / 24);
					if (secs > 59) 	data[i].gameTime = Math.floor(secs / 60) + "m "; else data[i].gameTime = "";
					data[i].gameTime += Math.ceil(secs % 60) + "s";
				}
			}
			// Required for index to work as expected
			data.sort(function(a,b) { 
				return b.endedAt - a.endedAt;
			});
			let html = template(data);
			$("#gamesTable tbody").append(html);
			$("#gamesTable").tablesorter({
				widgets: ["filter"],
				widgetOptions: {
				}
			});
		});
	});
</script>
<small><a href="#Legend">What do the symbols mean?</a></small>
<table id="gamesTable">
	<thead>
		<tr>
			<th>Bot A</th>
			<th>Bot B</th>
			<th class="filter-select">Map</th>
			<th class="filter-false">Ended At</th>
			<th class="filter-false" data-sorter="false">Game time</th>
			<th class="filter-false" data-sorter="false"><i class="fas fa-download"></i></th>
			<th class="filter-false" data-sorter="false"><i class="fas fa-eye"></i></th>
		</tr>
	</thead>
	<tbody>
	</tbody>
</table>
<a class="normal" name="Legend"><h3>Legend:</h3></a>
<dl>
	<dt><i class="fas fa-trophy"></i></dt>
	<dd>Bot has won the game.</dd>
	<dt><i class="fas fa-sad-tear"></i></dt>
	<dd>Bot has lost the game.</dd>
	<dt><i class="fas fa-stopwatch"></i></dt>
	<dd>Game timed out (in-game).</dd>
	<dt><i class="fas fa-fish"></i></dt>
	<dd>Game timed out (real time).</dd>
	<dt><i class="fas fa-car-crash"></i></dt>
	<dd>Bot crashed.</dd>
	<dt><i class="fas fa-poo-storm"></i></i></dt>
	<dd>Game didn't start because one of the bots crashed prematurely.</dd>
	</dl>
<small>Source: <a href="http://basilicum.bytekeeper.org/stats/game_results.json">http://basilicum.bytekeeper.org/stats/game_results.json</a></small>
</table>

